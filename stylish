#!/usr/bin/env php
<?php

require 'require.php';

Reporter::shout(Reporter::MSG_START);

// first argument is the script's name: "stylish", remove this
array_shift($argv);

// the command to execute should be the first thing
$command = $argv[0];

// and we feed each command its own name, so directives are = argument string
$directives = $argv;

// each command should detect if its been called...
$watch = WatchCommand::detect($command);
$list = ListCommand::detect($command);
$stop = StopCommand::detect($command);
$shutdown = ShutdownCommand::detect($command);

$help = HelpDirective::detect($command);

// and then go through and perform approriate operations
if ($watch) {
	$watch = new WatchCommand($directives);
	$watch->execute();
} else if ($list) {
	$list = new ListCommand($directives);
	$list->execute();
} else if ($stop) {
	$stop = new StopCommand($directives);
	$stop->execute();
} else if ($shutdown) {
	$shutdown = new ShutdownCommand($directives);
	$shutdown->execute();
} else if ($help) {
	Reporter::shout(Reporter::MSG_HELP);
} else {
	Reporter::shout(Reporter::MSG_UNRECOGNIZED_COMMAND);
}
